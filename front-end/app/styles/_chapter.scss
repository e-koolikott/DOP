.portfolio-chapter-chapter-materials.ng-hide-remove.ng-hide-remove-active, .portfolio-chapter-subchapter-materials.ng-hide-remove.ng-hide-remove-active {
  animation:1s cubic-bezier(.17,.67,.83,.67) ease;
}

.portfolio-chapter-chapter-materials.ng-hide-add-active, .portfolio-chapter-subchapter-materials.ng-hide-add-active {
  animation:1s cubic-bezier(.17,.67,.83,.67) ease;
}

.portfolio-slide.ng-hide {
  height: 0;
  display: block;
}

/* .portfolio-chapter {
  h2 {
    margin: 0;
  }
  h3 {
    margin: 0;
    margin-top: 4px;
  }
  .md-body-1 {
    margin-bottom: 0;
  }
}

.chapter-title {
  margin: 0;
}


.portfolio-chapter {
  margin-bottom: 20px;

  .md-body-1  {
    font-size: 15px;
    line-height: 22px;
  }
} */

.portfolio-chapter-subchapter {
  .md-body-1  {
    font-size: 14px;
    line-height: 22px;
    column-count: 2;
  }
}

.portfolio-chapter-chapter-materials,
.portfolio-chapter-subchapter-materials {
  margin-top: 0px;
  margin-bottom: 0;
  padding-left: 0;
}

/**
 * For the correct positioning of the placeholder element, the dnd-list and
 * it's children must have position: relative
 */
ul[dnd-list],
ul[dnd-list] > li {
  position: relative;
}

/**
 * The dnd-list should always have a min-height,
 * otherwise you can't drop to it once it's empty
 */
ul[dnd-list] {
  min-height: 126px;
  padding-left: 0px;
}

/**
 * The dndDraggingSource class will be applied to
 * the source element of a drag operation. It makes
 * sense to hide it to give the user the feeling
 * that he's actually moving it.
 */
ul[dnd-list] .dndDraggingSource {
  display: none;
}

/**
 * An element with .dndPlaceholder class will be
 * added to the dnd-list while the user is dragging
 * over it.
 */
ul[dnd-list] .dndPlaceholder {
  display: block;
  background-color: #ddd;
  min-height: 100px;
}

/**
 * The dnd-lists's child elements currently MUST have
 * position: relative. Otherwise we can not determine
 * whether the mouse pointer is in the upper or lower
 * half of the element we are dragging over. In other
 * browsers we can use event.offsetY for this.
 */
ul[dnd-list] li {
  display: block;
}

/**
 * Show selected elements in green
 */
ul[dnd-list] li.selected {
  background-color: #dff0d8;
  color: #3c763d;
}



/**
 * V2
 */
$wvp-chapter-toolbar-width: 33.33%; // what's 25% of 75%

.portfolio-chapter {
  position: relative;
  margin-bottom: 1.5rem;

  md-card-content {
    min-height: 20rem;
    background-color: $white;
    position: relative;
    z-index: 2;
    box-shadow: 1px 0 0 rgba(0, 0, 0, 0.1);
  }
}
md-input-container.chapter-title {
  padding: 1rem 1rem 0;
  margin: -1rem -1rem 0;

  input {
    padding: 0;
    height: auto;
    line-height: 1.3;
    border-bottom-width: 2px;
    border-bottom-color: transparent;
  }
}

// toolbar: manage chapters
.add-chapter {
  cursor: pointer;
  font-weight: 500;
  text-transform: uppercase;
  
  label {
    color: #757575; // gray-600
    cursor: pointer;
  }
  &:hover {
    .md-button {
      background-color: #bdbdbd !important; // gray-400
    }
  }
}
.organize-chapter-btn {
  background-color: #e0e0e0; // gray-300

  &:hover {
    background-color: #bdbdbd !important; // gray-400
  }

  &[disabled] {
    pointer-events: none;
    background-color: #eeeeee; // gray-200
  }

  md-icon {
    color: $white !important;
  }
}
.organize-chapters {
  position: absolute;
  left: 100%;
  top: 5px;
  width: $wvp-chapter-toolbar-width;
  display: flex;
  justify-content: center;
}

// toolbar: manage blocks & embeds
.chapter-toolbar {
  position: absolute;
  z-index: 1;
  left: 100%;
  top: 0;
  width: $wvp-chapter-toolbar-width;
  height: 100%;
  min-width: 20rem;
  background-color: $white;
  box-shadow: $card-box-shadow;
  transition: transform .2s, box-shadow .2s;

  &.is-closed {
    pointer-events: none;
    transform: translateX(-100%);
    box-shadow:
      0px 1px 3px 0px rgba(0,0,0,0),
      0px 1px 1px 0px rgba(0,0,0,0),
      0px 2px 1px -1px rgba(0,0,0,0);
  }

  .sticky {
    &.is-sticky {
      position: fixed;
    }
    &.is-at-bottom {
      position: absolute;
      bottom: 0;
      top: auto !important;
      left: 0 !important;
    }
    &:not(.is-sticky) {
      width: auto !important;
    }

    > div {
      display: flex;
      flex-wrap: wrap;
      padding: 1rem;

      h5 {
        width: 100%;
        font-weight: 500;
        margin: 0 0 1rem;
      }

      + div {
        border-top: 1px solid #e0e0e0; // gray-300
      }
    }
  }
}
.chapter-btn {
  width: 25%;
  text-align: center;
  cursor: pointer;
  color: #9e9e9e; // gray-500
  transition: color .2s;

  &[disabled] {
    opacity: .5;
    pointer-events: none;
  }

  md-icon {
    color: #9e9e9e; // gray-500
    transition: color .2s;
  }

  button {
    display: inline-block;
    margin: 0;
  }

  label {
    cursor: pointer;
    font-size: .75rem;
  }

  &:hover {
    &, md-icon {
      color: #616161; // gray-700
    }
  }
}
.chapter-btn-large {
  cursor: pointer;
  font-size: .875rem;

  .md-button {
    padding: 0;
    width: 32px;
    height: 32px;
    min-height: 0;
    background-color: #9e9e9e; // gray-500
    transition: background-color .2s;
    
    md-icon {
      color: $white;
    }
  }

  &:hover {
    .md-button {
      background-color: #757575 !important; // gray-600
    }
  }

  label {
    cursor: pointer;
    font-weight: 500;
  }
}

.chapter-blocks {
  display: flex;
  flex-wrap: wrap;
  margin: -.75rem -1rem;
  width: calc(100% + 2rem);
}
.chapter-block {
  width: 100%;
  padding: .75rem 1rem;
  box-sizing: border-box;
  transition: opacity .2s;

  &:not(.medium-editor-placeholder) {
    overflow: hidden;
  }

  &.narrow {
    width: 50%;
  }

  .focused & {
    opacity: .5;

    &.focused {
      opacity: 1;
      outline: 1px dotted rgba(#9c27b0, .5); // purple-500-0.5
    }
  }

  h3, p, blockquote, ul {
    margin: 1rem 0;

    &:first-child {
      margin-top: 0;
    }
    &:last-child {
      margin-bottom: 0;
    }
  }

  // .subchapter
  h3 {
    font-size: 1.25rem;
    font-weight: 500;
    text-transform: none;
  }

  &, p, li {
    @extend .md-body-3;
  }

  textarea {
    display: none;
  }
}
.medium-editor-placeholder:after {
  @extend .md-body-3;
  font-style: normal;
  white-space: normal;
  color: #757575; // gray-600
}

.embed-card {
  margin: 1rem -1rem;
  background-color: $white;
  box-shadow: 0 0 0 1px #e0e0e0; // gray-300

  .chapter-block.narrow-left & {
    margin-right: 0;
  }
  .chapter-block.narrow-right & {
    margin-left: 0;
  }

  &:first-child {
    margin-top: 0;
  }
  &:last-child {
    margin-bottom: 0;
  }

  // placeholder
  &:not(.embed-card--loaded) {
    &:before,
    &:after {
      content: '';
      display: block;
    }
    &:before {
      padding-top: 56.25%;
      background-color: #e0e0e0; // gray-300
    }
    &.embed-card--soundcloud:before {
      padding-top: 300px;
    }
    &:after {
      height: 4.3rem;
      background-image: url('data:image/png;base64,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');
      background-size: auto 2.25rem;
      background-position: 1rem 1rem;
      background-repeat: no-repeat;
    }
  }
}
.embed-card--float-left {
  .chapter-block:not(.narrow) & {
    float: left;
    width: 50%;
    margin: 0 2rem 1rem -1rem;
  }
}
.embed-card--float-right {
  .chapter-block:not(.narrow) & {
    float: right;
    width: 50%;
    margin: 0 -1rem 1rem 2rem;
  }
}

// make sure that chapter-toolbar opens only by clicking on editable elements
/* .portfolio-chapter md-card-content {
  pointer-events: none;

  md-input-container.chapter-title input,
  .chapter-blocks {
    pointer-events: all;
  }
} */
