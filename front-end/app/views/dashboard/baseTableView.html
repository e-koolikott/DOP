<md-progress-linear data-ng-if="!data"></md-progress-linear>
<md-card class="md-data-table" data-ng-if="data">
  <!-- BEGIN Search learning objects -->
  <md-toolbar
    class="md-table-toolbar md-default"
    data-ng-if="$ctrl.viewPath != 'moderators' && $ctrl.viewPath != 'restrictedUsers'"
    >
    <div class="md-toolbar-tools">
      <h2 class="md-headline" data-translate="{{titleTranslationKey}}"></h2>
      <form data-flex name="filter.form">
        <md-input-container>
          <label></label>
          <md-icon data-md-colors="{ color: 'grey-400' }">search</md-icon>
          <input
            type="text"
            data-ng-model="query.filter"
            data-ng-model-options="filter.options"
            placeholder="{{'SEARCH' | translate}}"
            id="search-items"
          >
          <md-button
            class="md-icon-button md-ink-ripple"
            data-ng-click="$ctrl.clearFilter()"
            data-ng-if="query.filter"
            >
            <md-icon data-md-colors="{ color: 'grey-400' }">close</md-icon>
          </md-button>
        </md-input-container>
      </form>
    </div>
  </md-toolbar>
  <!-- END Search learning objects -->
  <!-- BEGIN Search users -->
  <md-toolbar
    class="md-table-toolbar md-default"
    data-ng-if="$ctrl.viewPath == 'moderators' || $ctrl.viewPath == 'restrictedUsers'"
    >
    <div layout-margin>
      <h2 class="md-title" data-translate="SEARCH_USERS"></h2>
    </div>
    <div class="md-toolbar-tools">
      <md-autocomplete
        flex
        md-min-length="0"
        md-input-name="autocompleteField"
        md-selected-item="selectedUser"
        md-search-text="filterUsersInput"
        md-items="user in $ctrl.filterUsers(filterUsersInput)"
        md-item-text="user.username"
        placeholder="{{$ctrl.getUsernamePlaceholder()}}"
        >
        <md-item-template>
          <span md-highlight-text="filterUsersInput">{{user.username}}</span>
        </md-item-template>
      </md-autocomplete>
      <md-button
        aria-label="Ava kasutaja"
        class="md-raised md-default"
        data-ng-click="$ctrl.editUser(selectedUser)"
        data-translate="BUTTON_OPEN"
      ></md-button>
    </div>
  </md-toolbar>
  <!-- END Search users -->
  <md-table-container class="table-container">
    <div data-ng-show="itemsCount" class="md-data-table">
      <dop-unreviewed data-ng-if="$ctrl.viewPath == 'unReviewed'"></dop-unreviewed>
      <dop-improper data-ng-if="$ctrl.viewPath == 'improperMaterials'"></dop-improper>
      <dop-improper data-ng-if="$ctrl.viewPath == 'improperPortfolios'"></dop-improper>
      <dop-changed data-ng-if="$ctrl.viewPath == 'changedLearningObjects'"></dop-changed>
      <dop-broken data-ng-if="$ctrl.viewPath == 'brokenMaterials'"></dop-broken>
      <dop-deleted data-ng-if="$ctrl.viewPath == 'deletedPortfolios'"></dop-deleted>
      <dop-deleted data-ng-if="$ctrl.viewPath == 'deletedMaterials'"></dop-deleted>
      <dop-users data-ng-if="$ctrl.viewPath == 'moderators'"></dop-users>
      <dop-users data-ng-if="$ctrl.viewPath == 'restrictedUsers'"></dop-users>
    </div>
    <!-- BEGIN Not found message after data is loaded but contains 0 items -->
    <div
      data-ng-show="data && !itemsCount"
      data-layout="row"
      data-layout-align="center center"
      data-layout-padding
      >
      <h4 data-translate="{{
        $ctrl.viewPath == 'moderators' || $ctrl.viewPath == 'restrictedUsers'
          ? 'ERROR_USERS_NOT_FOUND'
          : 'ERROR_LEARNING_OBJECTS_NOT_FOUND'}}"
      ></h4>
    </div>
    <!-- END Not found message -->
  </md-table-container>
  <md-table-pagination
    data-ng-if="itemsCount && itemsCount > query.limit"
    data-md-limit="query.limit"
    data-md-page="query.page"
    data-md-total="{{itemsCount}}"
    data-md-on-paginate="onPaginate"
    data-md-page-select>
  </md-table-pagination>
</md-card>
